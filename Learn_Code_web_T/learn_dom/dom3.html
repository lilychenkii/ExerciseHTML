<html>
    <head>
        <title>Tiêu đề trang</title>
        <script type="text/javascript">
            var datasets = [
                { 'ID': "P01", 'Name': 'Coca', 'Price': 15, 'Quantity': 5, 'Photo': 'Coca.jpg' },
                { 'ID': "P02", 'Name': 'Sprite', 'Price': 12, 'Quantity': 10, 'Photo': 'Sprite.jpg' },
                { 'ID': "P03", 'Name': 'Sting', 'Price': 20, 'Quantity': 7, 'Photo': 'Sting.jpg' },
                { 'ID': "P04", 'Name': 'Fanta', 'Price': 25, 'Quantity': 2, 'Photo': 'Fanta.jpg' },
                { 'ID': "P05", 'Name': 'Pepsi', 'Price': 18, 'Quantity': 4, 'Photo': 'Pepsi.jpg' },
            ]
        </script>
    </head>
    <body>
        <table border="1">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Quantity</th>
                    <th>Price</th>
                    <th>Photo</th>
                    <th>Actions:</th>
                </tr>
            </thead>
            <tbody id="product_tbody"></tbody>
        </table>
        <script type="text/javascript">
            function display_products_table() {
                const product_tbody = document.getElementById("product_tbody")
                for (let i = 0; i < datasets.length; i++) {
                    const product = datasets[i]
                    const row = document.createElement('tr')

                    const td_id = document.createElement('td')
                    const td_name = document.createElement('td')
                    const td_quantity = document.createElement('td')
                    const td_price = document.createElement('td')
                    const td_photo = document.createElement('td')
                    const td_action = document.createElement('td')

                    td_id.innerText = product.ID
                    td_name.innerText = product.Name
                    td_quantity.innerText = product.Quantity
                    td_price.innerText = product.Price

                    const img_p = document.createElement('img')
                    img_p.setAttribute('src', './images/' + product.Photo)
                    img_p.setAttribute('width', 50)
                    img_p.setAttribute('height', 100)
                    img_p.setAttribute('title', 'Click here to view detail')
                    img_p.setAttribute('style', 'cursor:pointer')
                    td_photo.appendChild(img_p)

                    const img_detail = document.createElement('img')
                    img_detail.setAttribute('src', './images/icon_detail.png')
                    img_detail.setAttribute('style', 'cursor:pointer')
                    img_detail.setAttribute('title', 'View detail')
                    img_detail.selected_product = product
                    img_detail.onclick = function () {
                        const jsonString = JSON.stringify(this.selected_product)
                        localStorage.setItem('my_product', jsonString)
                        window.open('detail.html', '_self')
                    }
                    td_action.appendChild(img_detail)

                    const img_edit = document.createElement('img')
                    img_edit.setAttribute('src', './images/icon_edit.png')
                    img_edit.setAttribute('style', 'cursor:pointer')
                    img_edit.setAttribute('title', 'Edit product')
                    td_action.appendChild(img_edit)

                    const img_delete = document.createElement('img')
                    img_delete.setAttribute('src', './images/icon_delete.png')
                    img_delete.setAttribute('style', 'cursor:pointer')
                    img_delete.setAttribute('title', 'Delete product')
                    img_delete.parent_row = row
                    img_delete.onclick = function () {
                        if (confirm('Want to delete?')) {
                            product_tbody.removeChild(this.parent_row)
                        }
                    }
                    td_action.appendChild(img_delete)

                    row.appendChild(td_id)
                    row.appendChild(td_name)
                    row.appendChild(td_quantity)
                    row.appendChild(td_price)
                    row.appendChild(td_photo)
                    row.appendChild(td_action)

                    product_tbody.appendChild(row)
                }
            }

            display_products_table()
        </script>
    </body>
</html>